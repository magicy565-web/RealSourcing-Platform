# RealSourcing 5.0 · Commander 产品需求文档 (PRD)

**版本**：v1.0  
**日期**：2026年2月27日  
**状态**：内部评审稿  
**作者**：RealSourcing 产品团队

---

## 目录

1. [产品背景与战略定位](#一产品背景与战略定位)
2. [核心概念定义](#二核心概念定义)
3. [用户画像与用户故事](#三用户画像与用户故事)
4. [产品架构总览](#四产品架构总览)
5. [指挥官手机端（Commander App）](#五指挥官手机端commander-app)
6. [OpenClaw 智能体分层架构](#六openclaw-智能体分层架构)
7. [双轨获客引擎](#七双轨获客引擎)
8. [数字资产托管服务](#八数字资产托管服务)
9. [Web 管理端（Commander Dashboard）](#九web-管理端commander-dashboard)
10. [数据模型与技术架构](#十数据模型与技术架构)
11. [定价与商业模式](#十一定价与商业模式)
12. [GTM 与代理分销计划](#十二gtm-与代理分销计划)
13. [MVP 开发计划](#十三mvp-开发计划)
14. [风险评估](#十四风险评估)

---

## 一、产品背景与战略定位

### 1.1 从 4.0 到 5.0 的战略升维

RealSourcing 4.0 完成了采购商端的核心闭环：**15 分钟工厂匹配 + 30 分钟快速报价**，解决了海外买家找中国工厂的效率问题。这是平台的"买方侧"能力。

5.0 的战略目标是打通"卖方侧"——为中国中小工厂提供**主动出海获客**的能力，构建完整的供应链数字化生态。

4.0 解决的是"买家找工厂"的问题，5.0 解决的是"工厂找买家"的问题。两端打通后，RealSourcing 将成为连接全球采购需求与中国制造供给的完整双边平台。

### 1.2 目标市场与核心痛点

中国有超过 **400 万家**中小制造企业，其中约 **120 万家**有出口业务或出口意愿。这些企业的共同痛点是：

**痛点一：海外账号维护成本极高。** LinkedIn、Facebook、Made-in-China 等平台需要持续运营才能产生效果，但大多数工厂老板既没有时间，也不懂英文，更不了解海外平台规则。大量账号注册后长期沉睡，成为无效资产。

**痛点二：询盘响应速度慢。** 海外买家发出询盘后，平均等待工厂回复的时间超过 24 小时，而买家的耐心通常只有 2-4 小时。时区差异和语言障碍是主要原因。

**痛点三：客户数据分散，无法沉淀。** 客户联系方式散落在业务员的手机微信、邮件、Excel 表格中，老板无法全局掌控，业务员离职即带走客户资源。

**痛点四：不知道该开发哪个市场。** 老板凭经验和直觉判断市场机会，缺乏系统性的市场情报支撑。

### 1.3 产品定位

> **RealSourcing Commander 是一套面向中小工厂老板的"数字资产托管 + 海外市场增长"服务，以预装好的指挥官手机为载体，以 OpenClaw 云端智能体为执行引擎，让老板通过最熟悉的微信和飞书，实现对海外市场的傻瓜式指挥与掌控。**

我们卖的不是软件工具，而是**可量化的海外增长结果**。

---

## 二、核心概念定义

### 2.1 指挥官手机（Commander Phone）

一台预装了 Commander App、微信、飞书的安卓手机，是整个服务的**物理载体和价值锚点**。手机本身不运行复杂逻辑，它是老板与云端 OpenClaw 智能体之间的"遥控器"和"战报屏"。

手机的价值不在于硬件本身，而在于它代表的承诺：**"这台手机开机的那一刻，我们的数字员工就开始为您的企业在海外工作了。"**

### 2.2 OpenClaw 智能体

OpenClaw 是运行在云端的"数字员工工位"——一台持续运行的云端浏览器环境，能够以真人身份登录并操作 LinkedIn、Facebook、阿里巴巴、Made-in-China 等海外平台。

OpenClaw 分为两种形态：

- **独立 OpenClaw**：一台专属云电脑，只服务一家公司，负责多平台、多维度的运营任务。
- **标准 OpenClaw**：共享云电脑资源，负责特定行业/地区/市场的通用任务，同时服务多家非竞争关系的工厂。

### 2.3 数字资产（Digital Assets）

工厂在数字世界的所有有价值的存在，包括：

- **账号资产**：LinkedIn 账号、Facebook 主页、阿里巴巴店铺、Made-in-China 档案
- **关系资产**：历史客户联系方式、询盘记录、成交记录
- **内容资产**：产品介绍、行业文章、客户评价
- **情报资产**：市场趋势数据、竞品信息、买家画像

这些资产由 RealSourcing Commander 统一托管，归档在飞书多维表格中，老板随时可查看和导出。

### 2.4 积分（Credits）

积分是驱动 OpenClaw 执行任务的"燃料"。老板通过充值积分，按需触发特定的获客任务（如"立即开发越南太阳能板市场"）。积分消耗与任务复杂度挂钩，让老板对每一笔支出都有清晰的预期。

---

## 三、用户画像与用户故事

### 3.1 核心用户画像

**主要用户：工厂老板（Owner/CEO）**

| 属性 | 描述 |
| :--- | :--- |
| 年龄 | 35-55 岁 |
| 企业规模 | 50-500 人，年出口额 100 万-5000 万美元 |
| 技术能力 | 熟练使用微信，会用飞书，不懂英文，不了解海外平台 |
| 核心诉求 | 每个月能有真实的海外买家主动联系我 |
| 决策风格 | 结果导向，不关心过程，愿意为确定性结果付高价 |
| 痛点 | 没时间、不懂英文、不知道怎么维护海外账号 |

**次要用户：外贸经理（Sales Manager）**

外贸经理是实际操作指挥台的人，负责审核 OpenClaw 生成的回复草稿、管理询盘跟进、维护飞书数据库。他们是产品的日常使用者，但不是购买决策者。

### 3.2 核心用户故事

**故事一：傻瓜式开市**

> 王总是一家深圳灯具工厂的老板，工厂年出口额约 300 万美元，主要靠老客户介绍新客户。他想开发东南亚市场，但不知道从哪里开始。
>
> 他买了一台指挥官手机。开机后，他看到指挥台上有一个"发起指令"按钮。他点击，选择"开发新市场"，输入"越南 LED 灯具"，确认消耗 500 积分。
>
> 30 分钟后，他的微信收到通知："猎手已完成，找到 50 家越南灯具进口商"。1 小时后："侦察完成，筛出 8 家高意向买家"。2 小时后："战报已送达，8 封个性化开发信已准备好，请在指挥台审核"。
>
> 王总打开指挥台，看到 8 封英文开发信，每封都附有买家公司背景。他点击"一键发送"，OpenClaw 以他的 LinkedIn 身份发出。3 天后，有 2 家买家回复了。

**故事二：实时询盘响应**

> 凌晨 2 点，越南买家 Nguyen Van A 在 LinkedIn 上给王总发消息，询问 LED 灯具的报价。
>
> 王总的手机微信收到通知："新询盘：越南买家询问 LED 灯具价格，点击查看"。王总早上 8 点看到通知，打开指挥台，看到买家的消息和 OpenClaw 已准备好的中文翻译。他用中文回复报价，点击"发送"，OpenClaw 翻译成英文，以王总的 LinkedIn 身份发出。
>
> 买家收到回复时，距离他发出询盘只过了 6 小时，而不是通常的 24-48 小时。

**故事三：数字资产沉淀**

> 6 个月后，王总的飞书里有了一份"越南客户数据库"：38 家有过联系的买家，8 家有过报价，3 家成交。所有对话记录、报价历史、跟进状态一目了然。
>
> 他的 LinkedIn 账号有了 320 个越南灯具行业的连接，账号权重持续提升，开始有买家主动找上门。这些都是他的数字资产，即使有一天不续费，这些资产也永远属于他。

---

## 四、产品架构总览

```
┌─────────────────────────────────────────────────────────────────┐
│                    RealSourcing Commander 5.0                    │
├─────────────────┬───────────────────────────────────────────────┤
│  老板端（前台）  │              云端引擎（后台）                   │
├─────────────────┼───────────────────────────────────────────────┤
│                 │                                               │
│  指挥官手机      │   ┌─────────────────────────────────────┐    │
│  Commander App  │   │         OpenClaw 智能体集群           │    │
│  (H5 Web App)   │   │                                     │    │
│                 │   │  独立 OpenClaw    标准 OpenClaw       │    │
│  微信通知        │   │  (专属云电脑)     (共享云电脑)         │    │
│  (战报推送)      │   │                                     │    │
│                 │   │  猎手 Agent      RFQ 监控 Worker      │    │
│  飞书多维表格    │   │  侦察 Agent      内容发布 Worker       │    │
│  (数据归档)      │   │  内容 Agent      账号维护 Worker       │    │
│                 │   └──────────────┬──────────────────────┘    │
│  Web 管理端      │                  │                           │
│  (仪表盘)        │   ┌──────────────▼──────────────────────┐    │
│                 │   │         后端 API 服务                  │    │
│                 │   │  (Node.js + BullMQ + PostgreSQL)      │    │
│                 │   └─────────────────────────────────────┘    │
└─────────────────┴───────────────────────────────────────────────┘
```

**数据流向**：

1. 老板在指挥台发起指令 → 后端 API 创建任务 → BullMQ 队列 → OpenClaw 执行
2. OpenClaw 完成任务 → 回调后端 API → 飞书归档 + 微信通知老板
3. 海外平台新消息 → OpenClaw 检测 → 微信推送老板 → 老板中文回复 → OpenClaw 翻译发出

---

## 五、指挥官手机端（Commander App）

### 5.1 产品定义

Commander App 是一个 H5 Web App（PWA），预装在指挥官手机的桌面上作为快捷方式。它是老板与 OpenClaw 之间的唯一交互界面，设计原则是**极简、快速、结果导向**。

老板在 10 秒内完成他想做的任何事。

### 5.2 界面结构

App 分为四个核心页面（底部 Tab 导航）：

#### Tab 1：今日战报（首页）

这是老板每天打开 App 的第一个页面，显示最重要的信息：

- **积分余额**：当前剩余积分，不足时显示充值提示
- **今日询盘**：今日新增的询盘数量，点击查看详情列表
- **任务动态**：正在执行的 OpenClaw 任务进度（带步骤动画）
- **月度战报卡片**：本月询盘总数、回复率、成交线索数

**设计要点**：深色背景，橙色强调色，数字大而清晰，让老板一眼看到"今天有几条询盘"。

#### Tab 2：发起指令

老板通过这个页面触发 OpenClaw 执行特定任务：

**指令卡片列表**（MVP 阶段提供以下指令）：

| 指令名称 | 描述 | 积分消耗 |
| :--- | :--- | :--- |
| 开发新市场 | 输入行业+地区，猎手+侦察+内容 Agent 串联执行 | 500 积分 |
| 监控今日询盘 | 扫描所有托管平台的新询盘 | 50 积分/次 |
| 发布行业内容 | AI 生成行业文章，发布到 LinkedIn/Facebook | 100 积分 |
| 主动连接买家 | 向指定名单发送 LinkedIn 连接请求 | 200 积分 |
| 竞品监控 | 分析竞争对手的最新动态 | 300 积分 |

每个指令卡片显示：指令名称、简短描述、积分消耗、预计完成时间。老板点击后进入确认页，确认后任务进入队列。

#### Tab 3：任务中心

显示所有历史任务和当前任务的状态：

- **进行中**：实时显示任务步骤进度（Step 1/2/3）
- **已完成**：任务结果摘要，点击查看详情
- **失败/重试**：失败原因说明，一键重试

**进度展示设计**：每个任务步骤完成时，界面有动画反馈（步骤图标变绿 + 微震动），同时推送微信通知。让老板感受到"机器在为我工作"。

#### Tab 4：数字资产

显示 OpenClaw 为老板积累的数字资产概览：

- **账号健康度**：LinkedIn/Facebook/阿里巴巴账号的活跃度评分
- **客户数据库**：飞书中归档的客户总数、本月新增
- **内容发布**：历史发布的内容数量和互动数据
- **AI 可见度**：工厂信息在 Perplexity/ChatGPT 等 AI 搜索中的曝光指数（GEO 指标）

点击任意模块，跳转到飞书对应的多维表格。

### 5.3 微信通知设计

微信通知是老板与系统之间最重要的连接点。通知分为三个优先级：

**P0 - 立即通知（红点 + 震动）**：
- 新询盘到达："[越南] Nguyen Van A 询问 LED 灯具价格，点击回复"
- 任务失败："开发越南市场任务失败，点击查看原因"

**P1 - 进度通知（红点）**：
- 任务步骤完成："猎手已完成 ✓ 找到 50 家越南进口商，侦察进行中..."
- 任务全部完成："战报已送达 ✓ 8 封开发信已准备好，点击审核"

**P2 - 日报通知（每日 9:00）**：
- "今日战报：新询盘 3 条，账号互动 12 次，积分余额 1,200"

### 5.4 询盘回复流程

当老板收到询盘通知后，完整的回复流程如下：

1. 点击微信通知 → 跳转到 Commander App 的询盘详情页
2. 详情页显示：买家原文（英文）+ OpenClaw 翻译（中文）+ 买家公司背景
3. 老板用中文输入回复内容（或选择预设模板）
4. 点击"发送" → OpenClaw 将中文翻译成英文，以老板账号身份发出
5. 对话记录自动同步到飞书客户数据库

---

## 六、OpenClaw 智能体分层架构

### 6.1 独立 OpenClaw（Premium）

**定义**：一台专属的云端浏览器工位，只服务一家公司，7×24 小时在线。

**能力范围**：

| 任务类型 | 具体能力 |
| :--- | :--- |
| **账号托管** | 托管老板的 LinkedIn、Facebook、阿里巴巴、Made-in-China 账号 |
| **消息监控** | 实时监控所有托管账号的新消息，毫秒级推送 |
| **内容运营** | 每周定期发布行业内容，维持账号活跃度 |
| **主动开发** | 按指令执行猎手/侦察/内容 Agent 的完整工作流 |
| **竞品监控** | 定期分析竞争对手的动态 |
| **报价协助** | 翻译买家询盘，生成报价草稿供老板审核 |

**账号安全机制**：

老板首次配置时，在 OpenClaw 的安全环境中完成账号登录。系统保存的是加密的 Session Cookie，不存储明文密码。即使数据泄露，也无法还原账号密码。Session 过期时，系统通过微信提醒老板重新授权。

**适用客户**：有外贸团队、年出口额 500 万美元以上、需要多平台全面运营的工厂。

### 6.2 标准 OpenClaw（Standard）

**定义**：共享的云端浏览器资源池，专注于特定行业/地区/市场的标准化任务。同一实例可服务多家非竞争关系的工厂（不同行业或不同地区）。

**能力范围**：

| 任务类型 | 具体能力 |
| :--- | :--- |
| **RFQ 监控** | 监控阿里巴巴、Made-in-China 等平台的公开询盘 |
| **询盘推送** | 将相关询盘推送给对应行业的工厂老板 |
| **基础内容** | 使用通用模板发布产品信息 |
| **市场情报** | 提供行业级别的市场趋势报告 |

**行业/地区限制逻辑**：

每个标准 OpenClaw 实例被分配到特定的"行业 × 地区"矩阵格子（例如"灯具 × 东南亚"）。同一格子内的工厂共享这个实例，但实例不会将 A 工厂的数据泄露给 B 工厂。

**适用客户**：刚起步做外贸、想低成本试水、年出口额 100 万美元以下的小工厂。

### 6.3 Agent 工作流设计

**猎手 Agent（Hunter）**：

负责在目标市场中找到潜在买家的基础信息。

```
输入：行业 + 目标地区（如"LED 灯具 × 越南"）
执行：
  1. 在 LinkedIn 搜索目标地区的采购经理/进口商
  2. 在 Made-in-China、Alibaba 等平台搜索相关买家
  3. 收集公司名称、联系人姓名、职位、公司规模
输出：50-100 条潜在买家基础信息
积分消耗：200 积分
```

**侦察 Agent（Scout）**：

对猎手找到的名单进行深度筛选，识别高意向买家。

```
输入：猎手 Agent 的输出名单
执行（并行处理）：
  1. 检查买家的 LinkedIn 近期动态（是否有采购相关帖子）
  2. 检查公司官网的产品目录（是否与我们的产品匹配）
  3. 检查是否在 Alibaba 上有过询盘记录
  4. 综合评分，筛选出高意向买家
输出：10-15 条高意向买家详细画像
积分消耗：150 积分
```

**内容 Agent（Writer）**：

为每位高意向买家生成个性化的英文开发信。

```
输入：侦察 Agent 的买家画像 + 工厂产品信息
执行（并行处理）：
  1. 分析买家的业务背景和痛点
  2. 结合工厂的产品优势，生成个性化开发信
  3. 确保语气专业、内容具体、有明确的行动号召
输出：10-15 封个性化英文开发信草稿
积分消耗：100 积分
```

**完整工作流（"开发新市场"指令）**：

```
老板发起指令："开发越南 LED 灯具市场"（消耗 500 积分）
    ↓ [Step 1 - 约 10 分钟]
猎手 Agent 执行 → 产出 50 家越南灯具进口商基础信息
微信通知："猎手已完成 ✓ 找到 50 家越南进口商，侦察进行中..."
    ↓ [Step 2 - 约 15 分钟，并行处理]
侦察 Agent 执行 → 筛选出 10 家高意向买家详细画像
微信通知："侦察完成 ✓ 筛出 10 家高意向买家，正在生成开发信..."
    ↓ [Step 3 - 约 10 分钟，并行处理]
内容 Agent 执行 → 生成 10 封个性化英文开发信草稿
微信通知："战报已送达 ✓ 10 封开发信已准备好，点击审核发送"
    ↓ [老板审核]
老板在指挥台查看开发信，点击"一键发送"
    ↓
OpenClaw 以老板 LinkedIn 身份发出，对话记录归档飞书
```

### 6.4 与 4.0 技术架构的集成

5.0 完全复用 4.0 的技术基础设施，在此之上扩展：

**复用 BullMQ 队列**：在现有 `queue.ts` 中新增三个队列：

```typescript
// 新增：猎手任务队列
export const hunterAgentQueue = new Queue('hunter-agent', {
  connection: redisConnection,
  defaultJobOptions: {
    attempts: 3,
    backoff: { type: 'exponential', delay: 5000 },
  },
});

// 新增：侦察任务队列
export const scoutAgentQueue = new Queue('scout-agent', { ... });

// 新增：内容生成队列
export const writerAgentQueue = new Queue('writer-agent', { ... });
```

**复用 clawAgentRouter.ts**：现有的心跳监测、HMAC 签名验证、回调机制直接复用，5.0 的 OpenClaw 实例注册到同一个 `agentRegistry`。

**复用 feishuService.ts**：所有任务结果通过现有的飞书服务归档到多维表格。

**新增 wechatNotifyService.ts**：集成微信公众号模板消息 API，实现微信推送。

---

## 七、双轨获客引擎

### 7.1 设计原则

5.0 的获客引擎采用"双轨并行"策略，同时解决客户的"短期结果"和"长期价值"需求：

- **短期轨道（RFQ 监控）**：在老板订阅的第一个月内，交付可量化的真实询盘，建立信任。
- **长期轨道（GEO 优化）**：在后台持续为工厂建设数字资产，提升在 AI 搜索引擎中的可见度，形成被动获客能力。

### 7.2 短期轨道：RFQ 监控引擎

**核心承诺**：订阅第一个月内，推送不少于 **10 条**真实的、与工厂行业相关的海外买家询盘。

**数据来源**（按优先级排序）：

1. **阿里巴巴国际站后台**：OpenClaw 登录工厂的阿里巴巴账号，实时监控买家发来的询盘
2. **Made-in-China 平台**：同上，监控平台内的买家询盘
3. **LinkedIn 消息**：监控 LinkedIn 账号的新消息和连接请求
4. **Facebook 商业主页**：监控 Facebook 主页的消息和评论

**质量保障机制**：

MVP 阶段，所有推送给老板的询盘，必须经过人工审核（由 RealSourcing 的"情报分析师"审核），确保每一条都是真实的、有价值的询盘。宁可推送数量少，也不推送垃圾信息。

### 7.3 长期轨道：GEO 优化引擎

**核心逻辑**：当海外买家向 ChatGPT、Perplexity 等 AI 搜索引擎询问"哪里能找到某类产品的供应商"时，让我们的工厂客户出现在 AI 的回答中。

**GEO 建造者 Agent 的工作**（后台静默执行，不消耗老板积分）：

1. **创建数字工厂孪生**：为工厂生成一个结构化的英文介绍页，使用 Schema.org 结构化数据标注，便于 AI 引擎理解和引用
2. **多平台信息同步**：将工厂信息同步到 Thomasnet、Kompass 等被 AI 引擎高度信任的商业目录
3. **内容权威性建设**：将工厂的技术文章分发到行业博客和新闻稿平台，建立引用网络

**老板看到的 GEO 指标**（月度报告）：

- AI 可见度指数（0-100 分）
- 本月被 AI 引用次数
- 主要 AI 引擎（Perplexity、ChatGPT）的搜索排名变化

---

## 八、数字资产托管服务

### 8.1 服务定义

数字资产托管是 Commander 服务的核心价值主张之一。我们替老板管理他在数字世界的所有"存在感"，让这些原本分散、沉睡的资产持续增值。

### 8.2 账号资产托管

**托管流程**：

1. **入网配置**（一次性，由 RealSourcing 客服协助完成）：
   - 老板在安全环境中登录各平台账号
   - 系统保存加密 Session，不存储明文密码
   - 完成账号基础信息优化（头像、简介、产品信息）

2. **日常维护**（OpenClaw 自动执行）：
   - 每日登录账号，维持活跃状态
   - 定期发布内容，维持账号权重
   - 及时响应平台通知，避免账号降权

3. **Session 续期**（需老板配合）：
   - Session 过期时，微信通知老板
   - 老板点击通知，进入安全页面重新授权
   - 整个过程不超过 2 分钟

### 8.3 关系资产沉淀

所有通过 Commander 产生的客户互动，自动归档到飞书多维表格：

**飞书"海外客户数据库"表结构**：

| 字段 | 说明 |
| :--- | :--- |
| 公司名称 | 买家公司名 |
| 联系人 | 姓名 + 职位 |
| 来源平台 | LinkedIn / Facebook / 阿里巴巴等 |
| 首次接触时间 | 自动记录 |
| 最近互动时间 | 自动更新 |
| 询盘内容 | 原文 + 中文翻译 |
| 跟进状态 | 待回复 / 已回复 / 报价中 / 成交 / 暂停 |
| 备注 | 老板手动添加 |

### 8.4 资产归属声明

所有托管的账号和数据，永远归老板所有。老板随时可以：

- 导出飞书中的全部客户数据（CSV 格式）
- 取回账号的完整控制权
- 终止服务后，OpenClaw 不再访问任何账号

这是我们对客户的核心承诺，也是建立长期信任的基础。

---

## 九、Web 管理端（Commander Dashboard）

### 9.1 产品定位

Web 管理端是给外贸经理和老板在 PC 端使用的管理界面，提供比手机端更丰富的数据分析和管理功能。

**MVP 阶段，Web 管理端不是必须的**。种子期老板用手机端就够，Web 管理端在扩张期（3-6 个月后）推出。

### 9.2 核心功能模块

**模块一：总览仪表盘**

- 月度询盘趋势折线图
- 询盘来源分布饼图（LinkedIn / Facebook / 阿里巴巴）
- 市场地区分布地图
- 积分消耗趋势

**模块二：询盘管理**

- 所有询盘的列表视图（可筛选、排序）
- 询盘详情：买家信息 + 对话记录 + 跟进状态
- 批量操作：批量回复、批量标记状态

**模块三：Agent 任务管理**

- 所有历史任务的执行记录
- 任务详情：步骤日志 + 输出结果
- 任务调度：设置定时任务（如每周一自动执行 RFQ 监控）

**模块四：数字资产管理**

- 账号健康度监控面板
- GEO 可见度趋势图
- 内容发布历史记录

**模块五：积分与账单**

- 积分余额和消耗历史
- 充值入口
- 月度账单明细

---

## 十、数据模型与技术架构

### 10.1 新增数据库表（扩展 4.0 Schema）

```sql
-- 工厂账号托管表
CREATE TABLE factory_accounts (
  id SERIAL PRIMARY KEY,
  factory_id INTEGER REFERENCES factories(id),
  platform VARCHAR(50) NOT NULL, -- 'linkedin' | 'facebook' | 'alibaba' | 'made_in_china'
  account_identifier VARCHAR(255), -- 账号 ID 或用户名
  session_encrypted TEXT, -- 加密的 Session Cookie
  session_expires_at TIMESTAMP,
  status VARCHAR(20) DEFAULT 'active', -- 'active' | 'expired' | 'suspended'
  last_active_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);

-- 询盘记录表
CREATE TABLE inquiries (
  id SERIAL PRIMARY KEY,
  factory_id INTEGER REFERENCES factories(id),
  platform VARCHAR(50) NOT NULL,
  buyer_name VARCHAR(255),
  buyer_company VARCHAR(255),
  buyer_country VARCHAR(100),
  message_original TEXT, -- 原文（英文）
  message_translated TEXT, -- 中文翻译
  status VARCHAR(20) DEFAULT 'pending', -- 'pending' | 'replied' | 'quoted' | 'closed'
  received_at TIMESTAMP DEFAULT NOW(),
  replied_at TIMESTAMP,
  feishu_record_id VARCHAR(255) -- 飞书记录 ID
);

-- 获客任务表
CREATE TABLE acquisition_tasks (
  id SERIAL PRIMARY KEY,
  factory_id INTEGER REFERENCES factories(id),
  task_type VARCHAR(50) NOT NULL, -- 'develop_market' | 'rfq_monitor' | 'publish_content' | 'connect_buyers'
  status VARCHAR(20) DEFAULT 'queued', -- 'queued' | 'running' | 'completed' | 'failed'
  credits_consumed INTEGER DEFAULT 0,
  input_params JSONB, -- 任务输入参数
  output_summary JSONB, -- 任务输出摘要
  steps JSONB, -- 步骤进度记录
  openclaw_agent_id VARCHAR(100), -- 执行此任务的 OpenClaw 实例 ID
  created_at TIMESTAMP DEFAULT NOW(),
  started_at TIMESTAMP,
  completed_at TIMESTAMP,
  error_message TEXT
);

-- 积分账户表
CREATE TABLE credit_accounts (
  id SERIAL PRIMARY KEY,
  factory_id INTEGER REFERENCES factories(id) UNIQUE,
  balance INTEGER DEFAULT 0,
  total_purchased INTEGER DEFAULT 0,
  total_consumed INTEGER DEFAULT 0,
  updated_at TIMESTAMP DEFAULT NOW()
);

-- 积分流水表
CREATE TABLE credit_transactions (
  id SERIAL PRIMARY KEY,
  factory_id INTEGER REFERENCES factories(id),
  type VARCHAR(20) NOT NULL, -- 'purchase' | 'consume' | 'refund'
  amount INTEGER NOT NULL, -- 正数为增加，负数为消耗
  balance_after INTEGER NOT NULL,
  description TEXT,
  task_id INTEGER REFERENCES acquisition_tasks(id),
  created_at TIMESTAMP DEFAULT NOW()
);

-- OpenClaw 实例表
CREATE TABLE openclaw_instances (
  id SERIAL PRIMARY KEY,
  agent_id VARCHAR(100) UNIQUE NOT NULL,
  instance_type VARCHAR(20) NOT NULL, -- 'dedicated' | 'standard'
  factory_id INTEGER REFERENCES factories(id), -- 独立版：绑定工厂；标准版：NULL
  industry VARCHAR(100), -- 标准版：负责的行业
  region VARCHAR(100), -- 标准版：负责的地区
  status VARCHAR(20) DEFAULT 'offline', -- 'online' | 'offline' | 'alert'
  last_heartbeat_at TIMESTAMP,
  active_jobs INTEGER DEFAULT 0,
  total_jobs_processed INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW()
);

-- 数字资产 GEO 指标表
CREATE TABLE geo_metrics (
  id SERIAL PRIMARY KEY,
  factory_id INTEGER REFERENCES factories(id),
  month DATE NOT NULL, -- 月度快照
  visibility_score INTEGER, -- AI 可见度指数 (0-100)
  citation_count INTEGER, -- 被 AI 引用次数
  directory_listings INTEGER, -- 商业目录收录数量
  content_pieces INTEGER, -- 已发布内容数量
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 10.2 技术栈总览

| 层次 | 技术选型 | 说明 |
| :--- | :--- | :--- |
| **手机端 H5** | React 19 + TailwindCSS 4 + Vite (PWA) | 与 4.0 完全一致，复用组件库 |
| **Web 管理端** | React 19 + Recharts + shadcn/ui | 与 4.0 完全一致 |
| **后端 API** | Node.js + Express + TypeScript | 扩展现有 4.0 后端 |
| **任务队列** | BullMQ + Redis | 复用现有 queue.ts，新增三个队列 |
| **数据库** | PostgreSQL + Drizzle ORM | 扩展现有 schema，新增 7 张表 |
| **AI 调用** | OpenAI GPT-4o | 复用现有 AMR 服务封装 |
| **飞书集成** | 飞书开放平台 API | 复用现有 feishuService.ts |
| **微信通知** | 微信公众号模板消息 API | 新增 wechatNotifyService.ts |
| **OpenClaw 通信** | HTTPS + HMAC-SHA256 签名 | 复用现有 clawAgentRouter.ts |
| **账号 Session 加密** | AES-256-GCM | 新增，用于安全存储 Session Cookie |
| **部署** | 现有 Manus 托管平台 | 无需额外基础设施 |

### 10.3 新增 API 接口

```
POST /api/v5/tasks/create          创建获客任务
GET  /api/v5/tasks/:id/status      查询任务状态
GET  /api/v5/tasks/list            获取任务列表

GET  /api/v5/inquiries             获取询盘列表
POST /api/v5/inquiries/:id/reply   回复询盘（触发 OpenClaw 翻译发送）

GET  /api/v5/credits/balance       查询积分余额
POST /api/v5/credits/purchase      购买积分

GET  /api/v5/assets/overview       数字资产概览
GET  /api/v5/assets/geo-metrics    GEO 指标数据

POST /api/v5/accounts/bind         绑定平台账号（触发 OpenClaw 登录）
GET  /api/v5/accounts/status       查询账号健康状态

POST /api/v1/claw/heartbeat        [复用] OpenClaw 心跳（已有）
POST /api/v1/claw/callback/task    [新增] 获客任务完成回调
POST /api/v1/claw/callback/inquiry [新增] 新询盘推送回调
```

---

## 十一、定价与商业模式

### 11.1 产品定价体系

**三层收入结构**：一次性硬件收入 + 稳定订阅收入 + 弹性积分收入

#### 层一：指挥官手机（一次性）

| 项目 | 价格 | 说明 |
| :--- | :--- | :--- |
| 指挥官手机（含标准版首年服务） | ¥4,980 | 手机硬件 + 预装配置 + 首年标准 OpenClaw 服务 |
| 指挥官手机（含独立版首年服务） | ¥14,980 | 手机硬件 + 预装配置 + 首年独立 OpenClaw 服务 |

手机硬件成本约 ¥800-1,200（采购安卓中端机），预装配置服务约 ¥200，首年服务费是主要利润来源。

#### 层二：年费订阅（续费）

| 版本 | 年费 | 月均费用 | 包含内容 |
| :--- | :--- | :--- | :--- |
| **标准版** | ¥3,980/年 | ¥332/月 | 标准 OpenClaw + RFQ 监控 + 每月 500 积分 |
| **独立版** | ¥12,800/年 | ¥1,067/月 | 专属 OpenClaw + 全平台账号托管 + 每月 2,000 积分 + 专属客服 |

#### 层三：积分充值（按需）

| 积分包 | 价格 | 单价 |
| :--- | :--- | :--- |
| 500 积分 | ¥98 | ¥0.196/积分 |
| 2,000 积分 | ¥298 | ¥0.149/积分 |
| 5,000 积分 | ¥598 | ¥0.120/积分 |
| 10,000 积分 | ¥998 | ¥0.100/积分 |

**积分消耗参考**：

| 任务 | 积分消耗 | 折合费用 |
| :--- | :--- | :--- |
| 开发新市场（完整工作流） | 500 积分 | ¥50-98 |
| RFQ 监控（单次） | 50 积分 | ¥5-10 |
| 发布行业内容 | 100 积分 | ¥10-20 |
| 主动连接买家（10 人） | 200 积分 | ¥20-40 |

### 11.2 客户生命周期价值（LTV）

以标准版客户为例：

- **首年**：手机 ¥4,980 + 积分充值（平均 ¥500）= **¥5,480**
- **第二年起**：年费 ¥3,980 + 积分充值（平均 ¥800）= **¥4,780/年**
- **3 年 LTV**：¥5,480 + ¥4,780 × 2 = **¥15,040**

以独立版客户为例：

- **首年**：手机 ¥14,980 + 积分充值（平均 ¥2,000）= **¥16,980**
- **第二年起**：年费 ¥12,800 + 积分充值（平均 ¥3,000）= **¥15,800/年**
- **3 年 LTV**：¥16,980 + ¥15,800 × 2 = **¥48,580**

### 11.3 代理商政策

| 级别 | 标准版进货价 | 独立版进货价 | 季度销售要求 |
| :--- | :--- | :--- | :--- |
| **城市代理** | 手机套餐 7 折 | 手机套餐 7 折 | 季度 20 台 |
| **区域代理** | 手机套餐 6 折 | 手机套餐 6 折 | 季度 50 台 |
| **战略代理** | 手机套餐 5 折 | 手机套餐 5 折 | 季度 100 台 |

代理商支持：产品培训、销售话术手册、演示视频、客户成功案例、48 小时技术支持响应。

---

## 十二、GTM 与代理分销计划

### 12.1 三阶段 GTM 策略

| 阶段 | 时间 | 目标 | 核心策略 |
| :--- | :--- | :--- | :--- |
| **种子期** | 0-3 个月 | 20 台手机，验证价值 | 创始人直销，精选种子客户 |
| **扩张期** | 3-9 个月 | 200 台手机，建立口碑 | 行业协会合作，代理商招募 |
| **规模期** | 9-24 个月 | 2,000 台手机，全国布局 | 代理商体系，线上获客 |

### 12.2 种子期（0-3 个月）

**目标**：找到 20 位愿意为结果付费的工厂老板，验证"每月保底询盘"的核心价值主张。

**选客标准**：
- 有真实的外贸需求（已有海外客户，想扩大）
- 老板本人参与决策，不是交给外贸经理
- 行业集中在 2-3 个品类（便于 Agent 优化）
- 有 LinkedIn 或 Facebook 账号（或愿意新建）

**核心销售话术**：

> "我们不卖工具，我们卖结果。买这台手机，就是和我们签了一份协议：我们承诺，每个月为您推送不少于 10 条真实的海外买家询盘，同时帮您维护好您的 LinkedIn 账号，让它每天都在为您工作。做不到，退款。"

**种子期关键原则**：不惜人工成本，确保每一条推送给老板的询盘都是高质量的。第一批种子客户的口碑，决定了整个产品的生死。

### 12.3 扩张期（3-9 个月）

**行业协会合作**：与灯具、家具、五金、纺织等行业协会合作，以"会员专属价"进入协会的会员服务体系。协会提供背书和渠道，我们提供会员增值服务。

**代理商招募**：目标是外贸代运营公司、外贸培训机构，他们已有工厂客户基础，认可"结果导向"的销售理念。

### 12.4 规模期（9-24 个月）

**内容营销**：在抖音、视频号发布"工厂老板的海外增长故事"系列，以真实客户成功案例为内容，低成本高信任度传播。

**B 方向和 C 方向的开启**：在 A 方向（老板真实账号托管）验证成功后，逐步推出 B 方向（专属业务开发账号）和 C 方向（数字员工账号），形成完整的账号服务矩阵。

### 12.5 关键成功指标（KPI）

| 指标 | 种子期 | 扩张期 | 规模期 |
| :--- | :--- | :--- | :--- |
| 累计销售手机 | 20 台 | 200 台 | 2,000 台 |
| 客户月均询盘 | ≥10 条 | ≥12 条 | ≥15 条 |
| 客户续费率 | — | ≥70% | ≥80% |
| 月经常性收入 (MRR) | ¥16K | ¥160K | ¥1.6M |
| NPS 净推荐值 | ≥50 | ≥60 | ≥70 |

---

## 十三、MVP 开发计划

### 13.1 开发原则

**第一阶段（4 周）**：只交付"短期结果"能力，让种子客户在拿到手机后的第一周就能收到真实询盘。

**第二阶段（4 周）**：在第一阶段验证效果后，交付"长期价值"能力（Agent 工作流、GEO 优化、积分系统）。

### 13.2 第一阶段任务清单（第 1-4 周）

| 周次 | 任务 | 负责模块 |
| :--- | :--- | :--- |
| 第 1 周 | 数据库 Schema 扩展（新增 7 张表） | 后端 |
| 第 1 周 | 微信公众号接入，实现模板消息推送 | 后端 |
| 第 1-2 周 | RFQ 监控 Worker 开发（阿里巴巴 + LinkedIn） | OpenClaw |
| 第 2-3 周 | Commander App H5（今日战报 + 任务中心 Tab） | 前端 |
| 第 3 周 | 询盘回复流程（中文输入 → OpenClaw 翻译发出） | 前端 + 后端 |
| 第 4 周 | 飞书客户数据库自动归档 | 后端 |
| 第 4 周 | 端到端测试，种子客户手机配置 | 全栈 |

### 13.3 第二阶段任务清单（第 5-8 周）

| 周次 | 任务 | 负责模块 |
| :--- | :--- | :--- |
| 第 5 周 | 积分系统（账户 + 充值 + 消耗） | 后端 |
| 第 5-6 周 | 猎手 + 侦察 + 内容 Agent 开发 | OpenClaw |
| 第 6 周 | Commander App"发起指令"Tab | 前端 |
| 第 7 周 | GEO 建造者 Agent（基础版） | OpenClaw |
| 第 7 周 | Commander App"数字资产"Tab | 前端 |
| 第 8 周 | Web 管理端（基础版仪表盘） | 前端 |
| 第 8 周 | 全面测试，第一批 20 台手机出货 | 全栈 |

### 13.4 种子期成功标准

第一批 20 台手机交付后，以下指标达成视为 MVP 验证成功：

- 80% 的客户在第一个月收到 ≥10 条询盘
- 60% 的客户在第一个月有至少 1 次真实的买家回复
- 客户 NPS ≥ 50
- 无严重的账号安全事故

---

## 十四、风险评估

| 风险 | 概率 | 影响 | 应对策略 |
| :--- | :--- | :--- | :--- |
| **平台检测 OpenClaw 行为** | 中 | 高 | 模拟真人操作节奏，设置随机延迟，避免高频重复操作；一旦账号被警告，立即暂停并人工处理 |
| **Session 安全泄露** | 低 | 极高 | AES-256-GCM 加密存储，定期轮换密钥，严格的访问控制日志 |
| **询盘质量不达标** | 中 | 高 | MVP 阶段人工审核兜底，建立质量 SLA，做不到退款 |
| **老板不会用手机** | 中 | 中 | 提供一对一上门配置服务，制作极简操作视频教程 |
| **竞争对手快速跟进** | 低 | 中 | 加速建立客户数据护城河，账号资产的迁移成本极高 |
| **GEO 效果周期长** | 高 | 低 | 短期用 RFQ 监控交付结果，GEO 作为长期价值，不对外承诺 GEO 的短期效果 |
| **代理商管理失控** | 中 | 中 | 严格代理商准入，建立标准化培训体系，统一定价，禁止恶性竞争 |

---

*RealSourcing 5.0 Commander PRD v1.0 · 内部评审文档 · 2026年2月27日*
